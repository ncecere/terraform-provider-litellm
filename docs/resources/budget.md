# litellm_budget Resource

Manages a budget in LiteLLM. Budgets define spending limits and rate limits that can be associated with teams, users, or API keys.

## Example Usage

### Minimal

```hcl
resource "litellm_budget" "minimal" {
}
```

### Full

```hcl
resource "litellm_budget" "full" {
  budget_id             = "production-budget"
  max_budget            = 1000.0
  soft_budget           = 800.0
  max_parallel_requests = 20
  tpm_limit             = 100000
  rpm_limit             = 1000
  budget_duration       = "30d"
}
```

### With Model Max Budget

```hcl
resource "litellm_budget" "with_model_budget" {
  budget_id       = "model-limited-budget"
  max_budget      = 500.0
  budget_duration = "30d"

  model_max_budget = jsonencode({
    "gpt-4o"      = { max_budget = 300.0, budget_duration = "30d" }
    "gpt-4o-mini" = { max_budget = 200.0, budget_duration = "30d" }
  })
}
```

## Argument Reference

The following arguments are supported:

* `budget_id` - (Optional, ForceNew) A unique identifier for the budget. If omitted, a UUID is generated by LiteLLM. Changing this value forces the resource to be recreated.
* `max_budget` - (Optional) Maximum budget amount.
* `soft_budget` - (Optional) Soft budget threshold. When exceeded, alerts are triggered but requests are not blocked.
* `max_parallel_requests` - (Optional) Maximum number of parallel requests allowed.
* `tpm_limit` - (Optional) Tokens per minute limit.
* `rpm_limit` - (Optional) Requests per minute limit.
* `budget_duration` - (Optional) Duration for the budget cycle (e.g., `"30d"`, `"7d"`, `"1h"`).
* `model_max_budget` - (Optional) A JSON string defining per-model budget limits. The API expects a specific nested object format per model. This feature may require a LiteLLM Enterprise license.

## Attribute Reference

In addition to the arguments above, the following attributes are exported:

* `id` - The unique identifier of the budget (same as `budget_id`).

The following attributes are both Optional and Computed (they are read back from the API if not explicitly set):

* `budget_id`

## Import

Budgets can be imported using their budget ID:

```shell
terraform import litellm_budget.example <budget-id>
```

## Notes

- Both `budget_id` and `max_budget` are **optional**. If `budget_id` is omitted, a UUID is generated automatically.
- The `soft_budget` triggers alerts but does not block requests.
- The `max_budget` is a hard limit that blocks requests when exceeded.
- The `budget_duration` determines when the spend counter resets.
- The `model_max_budget` attribute accepts a JSON string; the exact nested object format expected by LiteLLM may require a LiteLLM Enterprise license.
